---
# Copyright 2014, Rackspace US, Inc.
# Copyright 2017, SUSE LINUX GmbH.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

nova_qemu_user: qemu
nova_qemu_group: qemu
libvirt_group: libvirt
libvirt_service_name: libvirtd

# Common zypper packages
nova_common_packages:
  - genisoimage
  - git-core
  - iptables
  - python-openstackclient
  - libpython2_7-1_0

# Source install zypper packages
nova_novnc_source_packages: "{{ nova_novnc_distro_packages }}"

nova_compute_kvm_source_packages: "{{ nova_compute_kvm_distro_packages }}"

nova_compute_lxd_source_packages: "{{ nova_compute_lxd_distro_packages }}"

nova_compute_powervm_source_packages: "{{ nova_compute_powervm_distro_packages }}"

nova_compute_barbican_source_packages: "{{ nova_compute_barbican_distro_packages }}"

nova_compute_oslomsg_amqp1_distro_packages: "{{ nova_compute_oslomsg_amqp1_distro_packages }}"

# Distro install zypper packages
nova_devel_distro_packages:
  - libxml2-devel
  - postgresql-devel
  - python-httplib2
  - which

nova_service_distro_packages:
  - python-memcached
  - python-novaclient
  - python-PyMySQL
  - uwsgi
  - uwsgi-python

nova_service_extra_distro_packages:
  kvm:
    - openstack-nova-compute
  lxd: []
  novnc:
    - openstack-nova-novncproxy
  spice: []
  serialconsole:
    - openstack-nova-serialproxy

nova_api_distro_packages:
  - openstack-nova-api

nova_conductor_distro_packages:
  - openstack-nova-conductor

nova_console_distro_packages:
  - openstack-nova-consoleauth

nova_placement_api_distro_packages:
  - openstack-nova-placement-api

nova_scheduler_distro_packages:
  - openstack-nova-scheduler

nova_novnc_distro_packages:
  - python-websockify

nova_compute_barbican_distro_packages:
  - cryptsetup

nova_compute_kvm_distro_packages:
  - bridge-utils
  - device-mapper
  - dosfstools
  - genisoimage
  - open-iscsi
  - kpartx
  - libvirt-daemon-config-nwfilter
  - libvirt-daemon-driver-qemu
  - libvirt-daemon-driver-secret
  - libvirt-daemon-driver-storage-core
  - libvirt-daemon-driver-storage-disk
  - libvirt-daemon-driver-storage-iscsi
  - libvirt-daemon-driver-storage-logical
  - libvirt-daemon-driver-storage-mpath
  - libvirt-daemon-driver-storage-rbd
  - libvirt-daemon-driver-storage-scsi
  - qemu-kvm
  - qemu-block-curl
  - qemu-block-dmg
  - qemu-block-iscsi
  - qemu-block-rbd
  - qemu-block-ssh
  - libvirt-devel
  - libvirt-python
  - nfs-utils
  - python-libguestfs
  - qemu-tools
  - sysfsutils

nova_compute_kvm_packages_to_symlink:
  - "{{ (ansible_distribution_version is version ('42', '>=')) | ternary('libvirt-python', 'python2-libvirt-python') }}"
  - "{{ (ansible_distribution_version is version ('42', '>=')) | ternary('python-libguestfs', 'python2-libguestfs') }}"

nova_compute_ksm_packages:
  - qemu-ksm

nova_compute_oslomsg_amqp1_distro_packages:
  - cyrus-sasl
  - cyrus-sasl-plain
  - cyrus-sasl-digestmd5

# TODO: add support for LXD on openSUSE at some point.
nova_compute_lxd_distro_packages: []

# TODO: add support for PowerVM/NovaLink on openSUSE at some point.
nova_compute_powervm_distro_packages: []

novalink_gpg_keys: []

nova_uwsgi_bin: '/usr/sbin'
